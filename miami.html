<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Graduates' Road Trip to Miami ðŸŒ´</title>
<style>
body { margin:0; overflow:hidden; font-family:Arial; }
canvas { display:block; }

#ui {
  position:absolute;
  top:10px;
  left:10px;
  color:white;
  font-size:20px;
}

#message {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:42px;
  color:white;
  text-align:center;
  display:none;
}

button {
  margin-top:20px;
  padding:10px 20px;
  font-size:16px;
  border:none;
  background:white;
  cursor:pointer;
}
</style>
</head>
<body>

<div id="ui">Collectibles: <span id="score">0</span></div>
<div id="message"></div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let gravity = 0.6;
let score = 0;
let gameOver = false;
let confetti = [];
let oceanOffset = 0;
let cloudOffset = 0;
let sunsetProgress = 0;

const player = {
  x: 100,
  y: 450 - 40, // platform Y minus player height
  width: 70,
  height: 40,
  dx: 0,
  dy: 0,
  speed: 5,
  jumping: false
};


const keys = {};
document.addEventListener("keydown", e => keys[e.code]=true);
document.addEventListener("keyup", e => keys[e.code]=false);

const platforms = [];

// First platform (starting ground)
platforms.push({
  x: 0,
  y: 450,
  width: 400,
  height: 20
});

// Remaining platforms
for(let i=1;i<30;i++){
  platforms.push({
    x:i*300,
    y:400-Math.random()*150,
    width:250,
    height:20
  });
}


const collectibles=[];
for(let i=1;i<15;i++){
  collectibles.push({
    x:i*600,
    y:250-Math.random()*100,
    size:25,
    collected:false
  });
}

let cameraX=0;

function drawBackground(){
  let gradient = ctx.createLinearGradient(0,0,0,canvas.height);

  if(player.x < 5000){
    gradient.addColorStop(0,"#87CEEB");
    gradient.addColorStop(1,"#228B22");
  } else {
    sunsetProgress += 0.005;
    if(sunsetProgress > 1) sunsetProgress = 1;

    gradient.addColorStop(0, `rgba(255,153,102,${sunsetProgress})`);
    gradient.addColorStop(1, `rgba(255,94,98,${sunsetProgress})`);
  }

  ctx.fillStyle=gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  drawClouds();

  if(player.x>=5000){
    drawOcean();
    drawPalmTrees();
  }
}

function drawClouds(){
  cloudOffset += 0.3;
  ctx.fillStyle="white";
  for(let i=0;i<canvas.width;i+=250){
    ctx.beginPath();
    ctx.arc((i+cloudOffset)%canvas.width,100,30,0,Math.PI*2);
    ctx.arc((i+40+cloudOffset)%canvas.width,100,35,0,Math.PI*2);
    ctx.arc((i+20+cloudOffset)%canvas.width,80,30,0,Math.PI*2);
    ctx.fill();
  }
}

function drawOcean(){
  oceanOffset+=0.02;
  ctx.fillStyle="#1E90FF";
  ctx.fillRect(0,canvas.height-120,canvas.width,120);

  ctx.strokeStyle="white";
  for(let i=0;i<canvas.width;i+=20){
    ctx.beginPath();
    ctx.moveTo(i,canvas.height-100+Math.sin(i*0.02+oceanOffset)*10);
    ctx.lineTo(i+20,canvas.height-100+Math.sin((i+20)*0.02+oceanOffset)*10);
    ctx.stroke();
  }
}

function drawPalmTrees(){
  ctx.fillStyle="black";
  for(let i=200;i<canvas.width;i+=350){
    ctx.fillRect(i,canvas.height-220,15,120);
    ctx.beginPath();
    ctx.arc(i+7,canvas.height-230,50,Math.PI,0);
    ctx.fill();
  }
}

function drawHighwaySigns(){
  ctx.fillStyle="green";
  ctx.fillRect(800-cameraX,300,120,60);
  ctx.fillRect(7000-cameraX,300,120,60);

  ctx.fillStyle="white";
  ctx.font="18px Arial";
  ctx.fillText("Indiana",820-cameraX,335);
  ctx.fillText("Miami",7030-cameraX,335);
}

function drawPlayer(){
  ctx.fillStyle="#ff4d4d";
  ctx.fillRect(player.x-cameraX,player.y,player.width,player.height);

  ctx.fillStyle="black";
  ctx.beginPath();
  ctx.arc(player.x-cameraX+15,player.y+40,8,0,Math.PI*2);
  ctx.arc(player.x-cameraX+55,player.y+40,8,0,Math.PI*2);
  ctx.fill();
}

function drawHeart(x,y,size){
  ctx.fillStyle="pink";
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.bezierCurveTo(x-size,y-size,x-size*2,y+size/2,x,y+size*2);
  ctx.bezierCurveTo(x+size*2,y+size/2,x+size,y-size,x,y);
  ctx.fill();
}

function drawCap(x,y,size){
  ctx.fillStyle="black";
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.lineTo(x+size,y-size/2);
  ctx.lineTo(x+size*2,y);
  ctx.lineTo(x+size,y+size/2);
  ctx.closePath();
  ctx.fill();
}

function update(){
  if(gameOver) return;

  if(keys["ArrowRight"]) player.dx=player.speed;
  else if(keys["ArrowLeft"]) player.dx=-player.speed;
  else player.dx=0;

  if((keys["Space"] || keys["ArrowUp"]) && !player.jumping){
    player.dy=-12;
    player.jumping=true;
  }

  player.dy+=gravity;
  player.x+=player.dx;
  player.y+=player.dy;

  if(player.y>canvas.height) resetGame();

  platforms.forEach(p=>{
    if(player.x<p.x+p.width &&
       player.x+player.width>p.x &&
       player.y<p.y+p.height &&
       player.y+player.height>p.y &&
       player.dy>0){
         player.y=p.y-player.height;
         player.dy=0;
         player.jumping=false;
       }
  });

  collectibles.forEach(c=>{
    if(!c.collected &&
       player.x<c.x+c.size*2 &&
       player.x+player.width>c.x &&
       player.y<c.y+c.size*2 &&
       player.y+player.height>c.y){
         c.collected=true;
         score++;
         document.getElementById("score").innerText=score;
         if(score===5) showMessage("ä½ å¾ˆæ£’",2000);
       }
  });

  if(player.x>9000) endGame();

  cameraX=player.x-200;
}

function drawPlatforms(){
  ctx.fillStyle="#654321";
  platforms.forEach(p=>{
    ctx.fillRect(p.x-cameraX,p.y,p.width,p.height);
  });
}

function drawCollectibles(){
  collectibles.forEach(c=>{
    if(!c.collected){
      drawCap(c.x-cameraX,c.y,c.size);
      drawHeart(c.x-cameraX,c.y+30,8);
    }
  });
}

function showMessage(text,duration){
  const msg=document.getElementById("message");
  msg.innerHTML=text;
  msg.style.display="block";
  setTimeout(()=>msg.style.display="none",duration);
}

function endGame(){
  gameOver=true;
  createConfetti();
  const msg=document.getElementById("message");
  msg.innerHTML=`Welcome to Miami ðŸŒ´<br><br>
  <button onclick="resetGame()">Play Again</button>`;
  msg.style.display="block";
}

function createConfetti(){
  for(let i=0;i<200;i++){
    confetti.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height,
      size:5+Math.random()*5,
      dy:Math.random()*3+1
    });
  }
}

function drawConfetti(){
  confetti.forEach(c=>{
    ctx.fillStyle=`hsl(${Math.random()*360},100%,50%)`;
    ctx.fillRect(c.x,c.y,c.size,c.size);
    c.y+=c.dy;
  });
}

function resetGame(){
  player.x=100; player.y=450 - player.height; player.dy=0;
  score=0; cameraX=0; confetti=[];
  sunsetProgress=0;
  collectibles.forEach(c=>c.collected=false);
  document.getElementById("score").innerText=0;
  document.getElementById("message").style.display="none";
  gameOver=false;
}

function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBackground();
  update();
  drawPlatforms();
  drawCollectibles();
  drawHighwaySigns();
  drawPlayer();
  if(gameOver) drawConfetti();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
